{"version":3,"file":"server.js","sources":["../../server/server.ts"],"sourcesContent":["import express, { Express } from \"express\";\nimport { connection } from \"../db/connect\";\nimport session from \"express-session\";\nimport MongoStore from \"connect-mongo\";\n\nimport { apiRouter } from \"./routes/api/masterAPIRouter\";\nimport { IUser } from \"../db/models/user\";\n\nconst app: Express = express();\n\n//Body parsing\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\n//Set up session for logged in user\ndeclare module \"express-session\" {\n  interface SessionData {\n    user: Partial<IUser>;\n  }\n}\n\nconst store = MongoStore.create({\n  client: connection.getClient(),\n  collectionName: \"sessions\",\n});\napp.use(\n  session({\n    secret: \"This is a secret\",\n    cookie: {\n      maxAge: 1000 * 60 * 60 * 2, // 2 Hours\n    },\n    store: store,\n    resave: true,\n    saveUninitialized: false,\n  })\n);\n\n//Routes\napp.use(\"/api\", apiRouter);\n\napp.use(\"*\", async (_req, res) => {\n  res.json({ success: false, message: \"Invalid route\" });\n});\n\napp.listen(3000, async () => {\n  console.log(\"Server running on http://localhost:3000\");\n});\n"],"names":[],"mappings":";;;;;;AAQA,MAAM,GAAG,GAAY,OAAO,EAAE,CAAC;AAE/B;AACA,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAShD,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC;AAC9B,IAAA,MAAM,EAAE,UAAU,CAAC,SAAS,EAAE;AAC9B,IAAA,cAAc,EAAE,UAAU;AAC3B,CAAA,CAAC,CAAC;AACH,GAAG,CAAC,GAAG,CACL,OAAO,CAAC;AACN,IAAA,MAAM,EAAE,kBAAkB;AAC1B,IAAA,MAAM,EAAE;QACN,MAAM,EAAE,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AAC3B,KAAA;AACD,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,IAAI;AACZ,IAAA,iBAAiB,EAAE,KAAK;AACzB,CAAA,CAAC,CACH,CAAC;AAEF;AACA,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;AAE3B,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,IAAI,EAAE,GAAG,KAAI;AAC/B,IAAA,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC,CAAC;AACzD,CAAC,CAAC,CAAC;AAEH,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,YAAW;AAC1B,IAAA,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;AACzD,CAAC,CAAC"}